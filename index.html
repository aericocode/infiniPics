<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>InfiniPics - Multi-Folder Slideshow</title>
    <link rel="stylesheet" href="./css/main.css">
    <link rel="icon" type="image/svg+xml" href="./images/favicon.svg">
</head>
<body>
    <!-- Single Ribbon -->
    <div class="ribbon">
        <span class="ribbon-title">üñºÔ∏è InfiniPics</span>
        
        <div class="ribbon-divider"></div>
        
        <div class="ribbon-group">
            <input type="number" id="slotCount" min="1" max="24" value="4" title="Number of slots" onchange="updateSlotCount()">
        </div>

        <div class="ribbon-group">
            <label>Layout:</label>
            <select id="layoutPreset" onchange="applyLayoutPreset()">
                <option value="auto" selected>Auto</option>
                <option value="1x1">1√ó1</option>
                <option value="2x1">2√ó1</option>
                <option value="2x2">2√ó2</option>
                <option value="3x2">3√ó2</option>
                <option value="3x3">3√ó3</option>
                <option value="4x3">4√ó3</option>
                <option value="4x4">4√ó4</option>
                <option value="4x5">4√ó5</option>
                <option value="4x6">4√ó6</option>
                <option value="5x4">5√ó4</option>
                <option value="6x4">6√ó4</option>
            </select>
        </div>

        <div class="ribbon-group">
            <label>Scale:</label>
            <select id="scalingMode" onchange="updateScalingMode()">
                <option value="native">Fit</option>
                <option value="fill">Fill</option>
            </select>
        </div>

        <div class="ribbon-divider"></div>
        
        <!-- Offset Toggle -->
        <button id="offsetBtn" class="offset-btn" onclick="toggleOffset()" title="Toggle staggered transitions (O)">üîÄ Offset</button>

        <div class="ribbon-divider"></div>

        <div class="ribbon-group">
            <button onclick="stepImage(-1)" title="Previous image">‚óÄ Prev</button>
            <button class="play-btn" id="playBtn" onclick="togglePlay()">‚ñ∂ Play</button>
            <button onclick="stepImage(1)" title="Next image">Next ‚ñ∂</button>
        </div>

        <div class="index-group">
            <span class="index-display" id="indexDisplay">0 / 0</span>
        </div>

        <div class="ribbon-group speed-group">
            <label>Speed:</label>
            <input type="range" id="slideSpeed" min="0" max="100" step="0.5" value="50" 
                   oninput="updateSpeedDisplay()" onchange="updateSpeed()">
            <span class="speed-display" id="speedDisplay">2.00s</span>
        </div>

        <button id="loopBtn" onclick="toggleLoop()" class="active">Loop üîÅ</button>


        <button onclick="showShortcuts()">‚å®</button>
        <button onclick="showInfo()" class="info-btn">‚ÑπÔ∏è Info</button>
        
        <!-- Support Button -->
        <a href="https://ko-fi.com/aericode" target="_blank" rel="noopener" class="support-btn" title="Support on Ko-fi">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
            Support
        </a>
    </div>

    <!-- Image Grid -->
    <div class="image-container" id="imageContainer"></div>

    <!-- Seizure Warning Modal -->
    <div class="seizure-modal" id="seizureModal">
        <div class="seizure-content">
            <div class="seizure-icon">‚ö†Ô∏è</div>
            <h2>Flashing Content Warning</h2>
            <p>Speeds below <strong>0.5 seconds</strong> may cause rapid flashing that could potentially trigger seizures in people with photosensitive epilepsy.</p>
            <p class="seizure-speed">Selected speed: <span id="seizureSpeed">0.25s</span></p>
            <div class="seizure-buttons">
                <button class="seizure-cancel" onclick="cancelSpeedChange()">Cancel</button>
                <button class="seizure-confirm" onclick="confirmSpeedChange()">I Understand, Continue</button>
            </div>
            <label class="seizure-checkbox">
                <input type="checkbox" id="dontShowAgain">
                Don't show this warning again
            </label>
        </div>
    </div>

    <!-- Shortcuts Modal -->
    <div class="shortcuts-modal" id="shortcutsModal" onclick="hideShortcuts(event)">
        <div class="shortcuts-content" onclick="event.stopPropagation()">
            <h2>‚å® Keyboard Shortcuts</h2>
            <div class="shortcut-row"><span>Play / Pause</span><span class="shortcut-key">Space</span></div>
            <div class="shortcut-row"><span>Previous / Next Image</span><span class="shortcut-key">‚Üê ‚Üí</span></div>
            <div class="shortcut-row"><span>Faster / Slower</span><span class="shortcut-key">‚Üë ‚Üì</span></div>
            <div class="shortcut-row"><span>First Image</span><span class="shortcut-key">Home</span></div>
            <div class="shortcut-row"><span>Last Image</span><span class="shortcut-key">End</span></div>
            <div class="shortcut-row"><span>Loop</span><span class="shortcut-key">R</span></div>
            <div class="shortcut-row"><span>Offset Mode</span><span class="shortcut-key">O</span></div>
            <div class="shortcut-row"><span>Fullscreen</span><span class="shortcut-key">F</span></div>
            <div class="shortcut-row"><span>Close</span><span class="shortcut-key">Esc</span></div>
        </div>
    </div>

    <!-- Info Modal -->
    <div class="info-modal" id="infoModal" onclick="hideInfo(event)">
        <div class="info-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="hideInfo(event)">‚úï</button>
            
            <h2>üñºÔ∏è InfiniPics</h2>
            <p class="tagline">Synchronized Multi-Folder Slideshow</p>
            
            <div class="info-section">
                <h3>‚ú® Features</h3>
                <ul>
                    <li><strong>Synchronized Slideshow</strong> ‚Äî View the 1st, 2nd, 3rd... image from each folder together</li>
                    <li><strong>Offset Mode</strong> ‚Äî Stagger transitions so slots change one at a time</li>
                    <li><strong>Infinite Looping</strong> ‚Äî Shorter folders loop seamlessly</li>
                    <li><strong>Flexible Layout</strong> ‚Äî Auto-grid or preset layouts, resize individual panels</li>
                    <li><strong>Variable Speed</strong> ‚Äî 0.05s to 10s delay between images</li>
                    <li><strong>Keyboard Shortcuts</strong> ‚Äî Full keyboard control</li>
                    <li><strong>Drag & Drop</strong> ‚Äî Simply drop folders to load</li>
                    <li><strong>Multiple Formats</strong> ‚Äî Supports JPG, PNG, GIF, and WebP</li>
                </ul>
            </div>
            
            <div class="info-section security-section">
                <h3>üîí Privacy & Security</h3>
                <div class="security-badges">
                    <span class="badge">‚úì Zero Tracking</span>
                    <span class="badge">‚úì No Analytics</span>
                    <span class="badge">‚úì No Cookies</span>
                </div>
                <ul>
                    <li><strong>100% Local</strong> ‚Äî All image processing happens in your browser</li>
                    <li><strong>No Uploads</strong> ‚Äî Your images never leave your device</li>
                    <li><strong>Offline Ready</strong> ‚Äî Works without internet once loaded (save the page!)</li>
                    <li><strong>No External Requests</strong> ‚Äî No CDNs, no third-party scripts</li>
                    <li><strong>Open Source</strong> ‚Äî Inspect the code yourself</li>
                </ul>
            </div>
            
            <div class="info-footer">
                <p>Made with ‚òï by <a href="https://ko-fi.com/aericode" target="_blank" rel="noopener">aericode</a></p>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- JavaScript Modules (order matters) -->
    <script src="./js/state.js"></script>
    <script src="./js/utils.js"></script>
    <script src="./js/layout.js"></script>
    <script src="./js/playback.js"></script>
    <script src="./js/slots.js"></script>
    <script src="./js/keyboard.js"></script>
    <script src="./js/main.js"></script>
</body>
</html>
